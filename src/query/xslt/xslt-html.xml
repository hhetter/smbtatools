<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="http://www.w3.org/1999/xhtml">

<xsl:output method="xml" indent="yes" encoding="UTF-8"/>

<xsl:template match="usage">
	<h2>
	<xsl:value-of select="description"/>
	</h2>
	<table border="1" width="100%" rules="groups">
  	<colgroup>
    		<col width="10%"/>
    		<col width="10%"/>
    		<col width="85%"/>
		<col width="5%"/>
		
  	</colgroup>

	<tr>
	<th>Time</th>
	<th>Data Flow</th>
	<th>Graph</th>
	</tr>
	<xsl:apply-templates select="usagerow">
	</xsl:apply-templates>
	</table>
</xsl:template>

<xsl:template match="usagerow">
	<tr>
	<td><xsl:value-of select="time"/></td>
	<td><xsl:value-of select="convval"/></td>
	<td><image height="10" width="{percent}%" src="one_pixel.png"/></td>
	<td><xsl:value-of select="percent"/>%</td>
	</tr>
</xsl:template>

<xsl:template match="last_activity">
	<h2>
	<xsl:value-of select="description"/>
	</h2>
	<table border="1" width="100%">
	<tr>
	<th>Timestamp</th>
	<th>VFS operation</th>
	<th>User</th>
	<th>File/Directory</th>
	<th>Domain</th>
	<th>Tranferred bytes</th>
	<th>Comment</th>
	<th>Other</th>
	</tr>
	<xsl:apply-templates select="last_activityrow">
	</xsl:apply-templates>
	</table>
</xsl:template>

<xsl:template match="last_activityrow">
	<tr>
	<td><xsl:value-of select="timestamp"/></td>
	<td><xsl:value-of select="vfs_func"/></td>
	<td><xsl:value-of select="user"/></td>
	<td><xsl:value-of select="file"/></td>
	<td><xsl:value-of select="domain"/></td>
	<td><xsl:value-of select="value"/></td>
	<td><xsl:value-of select="comment"/></td>
	<td><xsl:value-of select="file2"/></td>
	</tr>
</xsl:template>

<xsl:template match="footer">
	<br/>
	<hr/>
	<p align="right">
	<a href="{homepage}"><xsl:value-of select="application"/></a> Version <xsl:value-of select="version"/>, <xsl:value-of select="timestamp"/>
	</p>
</xsl:template>

</xsl:stylesheet>
